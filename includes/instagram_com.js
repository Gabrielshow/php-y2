!function(e){function t(t){for(var o,i,a=t[0],l=t[1],d=t[2],u=0,f=[];u<a.length;u++)i=a[u],r[i]&&f.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);f.length;)f.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={3:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var d=0;d<a.length;d++)t(a[d]);var c=l;s.push([227,0]),n()}({227:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),s=n(29);const i=/^[^{]+\{\s*\[native \w/;let a=function(e,t){return(a=i.test(document.compareDocumentPosition)||i.test(document.contains)?function(e,t){const n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1}).apply(this,arguments)};var l=(e,t)=>a(e,t),d=n(2),c=n(7),u=n(18),f=n(9),h=n(15),m=n(13),p=n(40),v=n(17),b=n(5),y=n(11),g=n(10),S=n(22);const k=Object(g.a)("instagram");u.a.isSingle()&&Object(v.b)("instagram",(function(e,t){const n=Object(h.a)(t),s=t.preferences;let i=s.moduleInstagram?1:0;o.a.onMessage.addListener((function(t,n,o){if("getModuleInfo"===t.action){if(t.url!==location.href)return;return o({state:i,moduleName:e})}if("changeState"===t.action){if(e!==t.moduleName)return;return a.changeState(t.state)}if("updatePreferences"!==t.action){if(i)return"updateLinks"===t.action?a.updateLinks():void 0}else Object.assign(s,t.preferences)})),i&&setTimeout((function(){a.run()}));const a={urlR:/\/\/[^\/]+\.[^\/]+\/p\//,lastWaitEl:null,dlBtnClassName:"savefrom-helper--btn",styleEl:null,queryHash:window.localStorage.getItem("_sf_query_hash")||"a9441f24ac73000fa17fe6e6da11d59d",run:function(){i=1,this.insertStyle(),f.a.isAvailable()&&this.mutationMode.enable()},rmStyle:function(){this.styleEl&&this.styleEl.parentNode&&this.styleEl.parentNode.removeChild(this.styleEl)},insertStyle:function(){this.styleEl?this.styleEl.parentNode||document.head.appendChild(this.styleEl):(this.styleEl=r.a.create("style",{text:Object(c.a)([{selector:"."+this.dlBtnClassName,style:{display:"none",border:"1px solid #F8F8F8",top:"8px",right:"8px",padding:0,position:"absolute",backgroundColor:"#F8F8F8",cursor:"pointer",lineHeight:0}},{selector:"."+this.dlBtnClassName+" svg",style:{margin:"2px"}},{selector:"."+this.dlBtnClassName+" svg path",style:{fill:"#777777"}},{selector:".Embed ."+this.dlBtnClassName,style:{border:"1px solid #B5B5B5",borderRadius:"4px",padding:"3px"}},{selector:"."+this.dlBtnClassName+":hover svg path",style:{fill:"#3f729b"}},{selector:"."+this.dlBtnClassName+":active",style:{outline:0,boxShadow:"inset 0 3px 5px rgba(0, 0, 0, 0.125)"}},{selector:["*:hover > ."+this.dlBtnClassName,"*.sf-touch-show > ."+this.dlBtnClassName],style:{display:"block"}},{selector:"*.sf-touch-hide > ."+this.dlBtnClassName,style:{display:"none"}}])}),document.head.appendChild(this.styleEl))},updateLinks:function(){this.changeState(0),this.changeState(1)},changeState:function(e){i=e,this.rmDlBtn(),this.rmStyle(),this.mutationMode.stop(),e&&this.run()},rmDlBtn:function(){const e=document.querySelectorAll("."+this.dlBtnClassName);for(let t,n=0;t=e[n];n++)t.parentNode.removeChild(t)},async getVideoFromApi(e,t=0){const n=new URLSearchParams({query_hash:a.queryHash,variables:JSON.stringify({shortcode:e})});return Object(S.a)({url:"https://www.instagram.com/graphql/query/?"+n.toString(),json:!0}).then(e=>{if(!e.body.data&&!e.body.data.shortcode_media&&!e.body.data.shortcode_media.video_url)throw new Error("Request video from api failed. Empty body");const t=e.body.data.shortcode_media;let n=t.title;return n=!n&&t.id?"video_"+t.id:"video_instagram",{filename:b.a.modify(n+".mp4"),url:t.video_url}},n=>{if(400==n&&0===t)return this.refreshQueryHash().then(()=>this.getVideoFromApi(e,1))})},async refreshQueryHash(){const e=document.querySelector('link[href*="Consumer.js/"]');return e&&e.href?Object(S.a)(e.href).then(e=>{const t=e.body.match(/s="(\w+)",l=/);t&&t[1]&&(a.queryHash=t[1],window.localStorage.setItem("_sf_query_hash",t[1]),k.info("new query hash",a.queryHash))}):(k.error("Consumer.js not found. refreshQueryHash error"),Promise.resolve())},getVideoInfo:function(e){const t=e.getAttribute("src");if("string"!=typeof t)return;let n="mp4";-1!==t.indexOf(".flv")&&(n="flv");let o=t.match(/\/([^\/?]+)(?:$|\?)/);(o=o&&o[1])||(o="noname."+n);let r=b.a.modify(a.getContentMakerName(e));return{filename:(r=r?r+"_":"")+o,url:t}},getImageInfo:function(e){let t=null;const n=e.getAttribute("srcset");if("string"==typeof n){const e=[];n.split(",").map((function(t){const n=t.split(" ");e.push({url:n[0],size:n[1]})})),e.sort((function(e,t){return e.size>t.size?-1:1}));const o=e.pop();o&&(t=o.url)}if(t||(t=e.getAttribute("src")),"string"!=typeof t)return;let o="jpg";-1!==t.indexOf(".png")&&(o="png");let r=t.match(/\/([^\/?]+)(?:$|\?)/);(r=r&&r[1])||(r="noname."+o);let s=b.a.modify(a.getContentMakerName(e));return{filename:(s=s?s+"_":"")+r,url:t}},getContentMakerName:function(e){const t=e.closest("article");if(t){const e=t.querySelector("header span a");return e?e.textContent:""}return""},getDbBtnEl:function(e){return r.a.create("a",{class:[this.dlBtnClassName],href:e.url,download:e.filename,title:o.a.i18n.getMessage("download"),style:{position:"absolute",zIndex:100},on:["click",u],append:[n.svg.getSvg("download",null,16,16)]})},showOnTouch:function(e,t){if(e.dataset.sfTouch>0)return;let n=!1,o=null;const s=function(){n&&(clearTimeout(o),o=setTimeout((function(){n&&(n=!1,e.classList.remove("sf-touch-show"),e.classList.add("sf-touch-hide"))}),3e3))};r.a.create(e,{data:{sfTouch:"1"},on:[["touchstart",function(t){n||(n=!0,e.classList.remove("sf-touch-hide"),e.classList.add("sf-touch-show"))}],["touchend",function(e){s()}]]})},getArticleIdFromURL(e){const t=e.match(/(?:\/p|\/tv)\/(.*)/);if(t&&t[1])return t[1].replace("/","")},getArticleIdFromContainer(e){const t=e.closest("article");if(t){const e=t.querySelector('a[href*="/p/"], a[href*="/tv/"]');if(e)return a.getArticleIdFromURL(e.href)}},addDlBtn:async function(e,t,n){const o="embed"===t,s=o&&document.querySelector(".Header")||e;s&&v(s);let i=e,c=null;const u=e.querySelector("div > div > video");if(u){u.src&&-1===u.src.indexOf("blob:")&&(c=this.getVideoInfo(u));const t=!u.src||-1!==u.src.indexOf("blob:"),n=a.getArticleIdFromURL(location.href)||a.getArticleIdFromContainer(e);if(t&&n)try{c=await this.getVideoFromApi(n)}catch(e){k.error("Get Video from api error: ",e)}}let f;if(!c)if(o)(f=i.querySelector(".EmbedFrame img.EmbeddedMediaImage"))&&(c=this.getImageInfo(f));else if(f=i.querySelector("div > img[src][srcset]"))c=this.getImageInfo(f);else if((f=i.querySelector("div > img"))&&("hidden"===f.style.visibility||!f.src)){const o=new p.a({target:f,attrs:[{name:"src",callback:r=>{r.value&&(this.addDlBtn(e,t,n),o.stop())}}]})}if(!c)return;const h=this.getDbBtnEl(c);let m="",b=null;f?(m="image",b=f):(m="video",b=u);const y=new p.a({target:b,attrs:[{name:"src",callback:e=>{e.value!==c.url&&(c=null,(c="image"===m?this.getImageInfo(b):this.getVideoInfo(b))&&h.parentNode?(h.href=c.url,h.download=c.filename):y.stop())}}]});if(d.a.onRemoveEvent(b,(function(){l(document.body,n)&&(n.dataset.sfSkip=0,a.mutationMode.observer.trigger(n))})),o){const e=document.querySelector(".Header");e&&(i=e,r.a.create(h,{style:{position:"relative",zIndex:100,display:"block",left:"auto",top:"auto",marginLeft:"10px"}}))}i.appendChild(h),this.showOnTouch(i,h)},mutationMode:{observer:null,stop:function(){this.observer&&this.observer.stop(),["sfSkip"].forEach((function(e){const t=Object(m.a)(e),n=document.querySelectorAll("["+t+"]");for(let e,o=0;e=n[o];o++)e.removeAttribute(t)}))},enable:function(){if(this.observer)return this.observer.start();this.observer=new f.a({queries:[{css:"div > div > article > header + div + div > div > div:nth-child(1) ul > li > div:nth-child(1) > div:nth-child(1)",is:"added",callback:e=>{for(let t,n=0;t=e.added[n];n++)t.dataset.sfSkip>0||(t.dataset.sfSkip="1",a.addDlBtn(t.parentNode,"",t))}},{css:"div > div > article > header + div + div > div > div:nth-child(1)",is:"added",callback:e=>{for(let t,n=0;t=e.added[n];n++)t.dataset.sfSkip>0||t.querySelector("ul > li")||(t.dataset.sfSkip="1",a.addDlBtn(t.parentNode,"",t))}},{css:".Embed > .Content.EmbedFrame > .EmbedVideo",is:"added",callback:e=>{for(let t,n=0;t=e.added[n];n++){if(t.dataset.sfSkip>0)continue;t.dataset.sfSkip="1";const e=Object(y.a)(t,".Embed");e&&(e.dataset.sfSkip="1",a.addDlBtn(e,"embed",e))}}},{css:".Embed > .Content.EmbedFrame.EmbedFrameWithSidecar > .EmbedSidecar > div > div > div + div > div > div > div > ul > li > div:nth-child(1) > div:nth-child(1)",is:"added",callback:e=>{for(let t,n=0;t=e.added[n];n++){if(t.dataset.sfSkip>0)continue;t.dataset.sfSkip="1";const e=Object(y.a)(t,".Embed");if(e&&e.dataset.sfSkip>0){const e=document.querySelector(".Header");e&&v(e)}a.addDlBtn(t.parentNode,"",t)}}},{css:".Embed",is:"added",callback:e=>{for(let t,n=0;t=e.added[n];n++)t.dataset.sfSkip>0||(t.dataset.sfSkip="1",a.addDlBtn(t,"embed",t))}},{css:`.${d.a.onRemoveClassName}`,is:"removed",callback:e=>{for(let t,n=0;t=e.removed[n];n++)d.a.onRemoveListener(t)}}]})}}};function u(e){e.stopPropagation(),n.downloadOnClick(e,void 0,{el:this})}function v(e){const t=e.querySelectorAll("."+a.dlBtnClassName);for(let e,n=0;e=t[n];n++)e.classList.remove(d.a.onRemoveClassName),e.parentNode.removeChild(e)}}),(function(){return!Object(s.a)()||!!/\/\/[^\/]+\.[^\/]+\/p\//.test(location.href)}))}});